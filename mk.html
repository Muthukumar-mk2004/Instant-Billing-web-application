<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Office Break Tiffins</title>
  <style>
    :root {
      --panel: #111827;
      --card: #1f2937;
      --accent: #f59e0b;
      --muted: #9ca3af;
      --text: #e5e7eb;
      --green: #10b981;
      --red: #ef4444;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, #111827 0, #0b1021 35%, #050814 70%);
      color: var(--text);
    }
    header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      padding: 24px 32px;
      gap: 12px;
    }
    h1 {
      margin: 0;
      font-size: 28px;
      letter-spacing: 0.5px;
    }
    .pill {
      background: rgba(245, 158, 11, 0.12);
      color: var(--accent);
      padding: 8px 14px;
      border-radius: 999px;
      font-weight: 600;
      border: 1px solid rgba(245, 158, 11, 0.35);
    }
    main {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 18px;
      padding: 0 24px 28px;
    }
    section {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 14px;
      padding: 16px;
      backdrop-filter: blur(6px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.28);
    }
    .section-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    .section-title h2 {
      margin: 0;
      font-size: 18px;
    }
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }
    .menu-card {
      background: var(--card);
      border-radius: 12px;
      padding: 10px;
      border: 1px solid rgba(255, 255, 255, 0.04);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: transform 0.15s ease, border-color 0.2s ease;
    }
    .menu-card:hover {
      transform: translateY(-3px);
      border-color: rgba(245, 158, 11, 0.35);
    }
    .menu-card img {
      width: 100%;
      height: 110px;
      object-fit: cover;
      border-radius: 10px;
    }
    .menu-card .title {
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }
    .tag {
      font-size: 11px;
      color: var(--muted);
    }
    .price {
      color: var(--accent);
      font-weight: 700;
    }
    .cart {
      background: var(--panel);
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .cart-items {
      max-height: 320px;
      overflow: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .cart-row {
      display: grid;
      grid-template-columns: 1fr 90px 80px 28px;
      align-items: center;
      gap: 8px;
      background: var(--card);
      padding: 8px 10px;
      border-radius: 10px;
    }
    .cart-row button {
      border: none;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      font-size: 16px;
    }
    .totals {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      padding: 10px;
      border-radius: 12px;
      display: grid;
      gap: 4px;
    }
    .totals-row {
      display: flex;
      justify-content: space-between;
      color: var(--muted);
    }
    .totals-row strong { color: var(--text); }
    .actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }
    button.primary, button.secondary, button.ghost {
      border: none;
      border-radius: 10px;
      padding: 12px 14px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.08s ease, opacity 0.1s ease;
    }
    button.primary {
      background: linear-gradient(135deg, #f59e0b, #f97316);
      color: #0f0f10;
    }
    button.secondary {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    button.ghost {
      background: transparent;
      color: var(--muted);
      border: 1px dashed rgba(255, 255, 255, 0.15);
    }
    button:active { transform: scale(0.98); }
    form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-bottom: 10px;
    }
    label {
      font-size: 12px;
      color: var(--muted);
    }
    input, select, textarea {
      width: 100%;
      padding: 9px 10px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.04);
      color: var(--text);
      font-size: 14px;
    }
    .table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }
    .table th, .table td {
      padding: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      text-align: left;
      color: var(--muted);
    }
    .table th { color: var(--text); }
    .badge {
      padding: 4px 8px;
      border-radius: 8px;
      background: rgba(16, 185, 129, 0.12);
      color: var(--green);
      font-weight: 700;
      font-size: 12px;
    }
    .qr-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 20;
    }
    .qr-card {
      background: #0b1021;
      padding: 18px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      max-width: 340px;
      width: 100%;
      text-align: center;
    }
    .qr-card img {
      width: 220px;
      height: 220px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      margin: 10px auto;
      display: block;
    }
    .flex-between {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    @media (max-width: 960px) {
      main { grid-template-columns: 1fr; }
      header { padding: 18px; }
      section { padding: 14px; }
    }
    @media (max-width: 640px) {
      .cart-row {
        grid-template-columns: 1fr;
        align-items: flex-start;
      }
      .cart-row .flex-between { justify-content: flex-start; }
      .actions { grid-template-columns: 1fr; }
      body { padding-bottom: 18px; }
    }
    @media print {
      body { background: #fff; color: #000; }
      header, .menu, .admin, .actions, .qr-modal, .sales { display: none !important; }
      .cart { box-shadow: none; border: 1px solid #ddd; }
      body.print-report header,
      body.print-report .menu,
      body.print-report .cart,
      body.print-report .admin,
      body.print-report .qr-modal { display: none !important; }
      body.print-report .sales {
        display: block !important;
        box-shadow: none;
        border: 1px solid #ddd;
      }
      body.print-report .table th,
      body.print-report .table td {
        color: #000 !important;
        border-color: #ccc !important;
      }
    }

/* ===============================
   NAVIGATION BAR (SAFE ADDITION)
================================ */

.app-navbar {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: var(--panel);
  padding: 12px 20px;
  display: flex;
  align-items: center;
  gap: 16px;
}

.nav-links {
  list-style: none;
  display: flex;
  gap: 20px;
  margin-left: auto;
  padding: 0;
}

.nav-links button {
  background: none;
  border: none;
  color: var(--text);
  font-weight: 600;
  cursor: pointer;
}

/* Hamburger */
.nav-toggle {
  display: none;
  background: none;
  border: none;
  font-size: 22px;
  color: var(--text);
  cursor: pointer;
}

/* MOBILE */
@media (max-width: 768px) {
  .nav-toggle {
    display: block;
  }

  .nav-links {
    position: fixed;
    top: 0;
    left: -240px;
    width: 220px;
    height: 100vh;
    background: var(--panel);
    flex-direction: column;
    padding: 70px 20px;
    gap: 16px;
    transition: left 0.3s ease;
  }

  .nav-links.open {
    left: 0;
  }
}
/* ===============================
   ACTIVE NAV ITEM
================================ */

.nav-links button.active {
  color: #00ffd5;
  position: relative;
}

.nav-links button.active::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 100%;
  height: 2px;
  background: #00ffd5;
}

/* Mobile highlight adjustment */
@media (max-width: 768px) {
  .nav-links button.active::after {
    display: none;
  }
}
/* ===============================
   NAV HOVER SLIDE INDICATOR
================================ */

.nav-links li {
  position: relative;
}

.nav-links li::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 0;
  height: 2px;
  background: #00ffd5; /* matches your theme accent */
  transition: width 0.3s ease;
}

.nav-links li:hover::after {
  width: 100%;
}

/* Active menu keeps indicator */
.nav-links button.active + li::after {
  width: 100%;
}

/* Disable indicator on mobile */
@media (max-width: 768px) {
  .nav-links li::after {
    display: none;
  }
}


  </style>
</head>
<body>
 <!-- NAVIGATION BAR -->
<nav class="app-navbar">
  <button class="nav-toggle" id="navToggle">=</button>

  <ul class="nav-links" id="navLinks">
    <li><button data-view="home">Home</button></li>
    <li><button data-view="admin">Manage Menu</button></li>
    <li><button data-view="sales">Sales Report</button></li>
  </ul>
</nav>


  <header>
    <div>
      <div class="pill">Live Kitchen · Instant Billing</div>
      <h1>Office Break Tiffins</h1>
    </div>
    <div class="flex-between" style="gap:12px; flex-wrap: wrap;">
      <div class="badge" id="today"></div>
      <div class="pill">Pay → QR · Print Bill · Sales Report</div>
    </div>
  </header>

  <main>
    <section class="menu">
      <div class="section-title">
        <h2>Menu</h2>
        <span class="tag">Tap to add to cart</span>
      </div>
      <div class="menu-grid" id="menuGrid"></div>
    </section>

    <section class="cart">
      <div class="section-title">
        <h2>Cart & Billing</h2>
        <button class="ghost" id="clearCart">Clear Cart</button>
      </div>
      <div class="cart-items" id="cartItems"></div>
      <div class="totals" id="totals"></div>
      <div class="actions">
        <button class="primary" id="payNow">Pay now (QR)</button>
        <button class="secondary" id="printBill">Print bill</button>
      </div>
    </section>
  </main>

  <section class="admin" style="margin: 0 24px 18px;">
    <div class="section-title">
      <h2>Manage Menu (CRUD)</h2>
      <span class="tag">Create · Read · Update · Delete</span>
    </div>
    <form id="menuForm">
      <div>
        <label>Name</label>
        <input required name="name" placeholder="Eg. Dosa" />
      </div>
      <div>
        <label>Price (₹)</label>
        <input required name="price" type="number" step="0.01" min="1" />
      </div>
      <div>
        <label>Category</label>
        <select name="category">
          <option>Breakfast</option>
          <option>Snack</option>
          <option>Beverage</option>
        </select>
      </div>
      <div>
        <label>Image URL</label>
        <input name="image" placeholder="https://..." />
      </div>
      <div style="display:flex; align-items:flex-end; gap:8px;">
        <button class="primary" type="submit" id="submitBtn">Save item</button>
        <button class="ghost" type="button" id="cancelEdit" style="display:none;">Cancel</button>
      </div>
    </form>
    <div style="overflow:auto;">
      <table class="table" id="menuTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section class="sales" style="margin: 0 24px 28px;">
    <div class="section-title">
      <h2>Monthly Sales Report</h2>
      <div class="flex-between" style="gap:8px; flex-wrap: wrap;">
        <span class="tag">Auto from paid bills</span>
        <div style="display:flex; gap:8px; flex-wrap: wrap;">
          <button class="secondary" id="printReport">Print report</button>
        </div>
      </div>
    </div>
    <div style="overflow:auto;">
      <table class="table" id="salesTable">
        <thead>
          <tr>
            <th>Month</th>
            <th>Total Orders</th>
            <th>Revenue (₹)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <div class="qr-modal" id="qrModal">
    <div class="qr-card">
      <div class="flex-between">
        <h3 style="margin:0;">Scan to pay</h3>
        <button class="ghost" id="closeQR">Close</button>
      </div>
      <p style="color: var(--muted); margin: 6px 0 10px;">UPI / QR placeholder</p>
      <img id="qrImg" alt="QR code" src="WhatsApp Image 2025-12-12 at 6.44.26 PM.jpeg" />
      <div class="totals-row" style="margin-top:8px;">
        <span style="color: var(--muted);">Amount</span>
        <strong id="qrAmount">₹0.00</strong>
      </div>
      <button class="primary" id="completePayment" style="width:100%; margin-top:10px;">Mark as paid</button>
    </div>
  </div>

  <script>
    const menuGrid = document.getElementById("menuGrid");
    const cartItemsEl = document.getElementById("cartItems");
    const totalsEl = document.getElementById("totals");
    const menuForm = document.getElementById("menuForm");
    const menuTableBody = document.querySelector("#menuTable tbody");
    const salesTableBody = document.querySelector("#salesTable tbody");
    const qrModal = document.getElementById("qrModal");
    const qrAmount = document.getElementById("qrAmount");
    const todayBadge = document.getElementById("today");
    const bodyEl = document.body;
    let editingId = null;
    let cart = [];

    const defaultMenu = [
      { id: crypto.randomUUID(), name: "Idly", price: 7, category: "Breakfast", image: "https://thumbs.dreamstime.com/z/many-idli-idly-chutney-powder-popular-homemade-breakfast-kerala-tamil-nadu-south-india-sri-lanka-arranged-banana-189827476.jpg" },
      { id: crypto.randomUUID(), name: "Puttu", price: 45, category: "Breakfast", image: "https://images.archanaskitchen.com/images/recipes/indian/indian-breakfast-tiffin-recipes/puttu-recipes/Kerala_Style_Puttu_Recipe_Steamed_Rice_Cakes_with_Coconut_1_1b017658d0.jpg" },
      { id: crypto.randomUUID(), name: "Puri", price: 40, category: "Breakfast", image: "https://ministryofcurry.com/wp-content/uploads/2020/03/puri-4.jpg" },
      { id: crypto.randomUUID(), name: "Coffee", price: 20, category: "Beverage", image: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=600&q=60" },
      { id: crypto.randomUUID(), name: "Vada", price: 6, category: "Snack", image: "https://tse2.mm.bing.net/th/id/OIP.ZEXEbUiOWdpoKdLtrYB8AQHaF7?rs=1&pid=ImgDetMain&o=7&rm=3" },
      { id: crypto.randomUUID(), name: "Pajji", price: 6, category: "Snack", image: "https://www.shutterstock.com/image-photo/fresh-mirchi-bajji-stuffed-green-260nw-2473482237.jpg" },
      { id: crypto.randomUUID(), name: "Masala Dosa", price: 40, category: "Breakfast", image: "https://img.freepik.com/premium-photo/masala-dosa-is-south-indian-meal-served-with-sambhar-coconut-chutney-selective-focus_466689-22958.jpg?w=2000" },
      { id: crypto.randomUUID(), name: "Chapati", price: 20, category: "Snack", image: "https://th.bing.com/th/id/OIP.Tx0STb3VzN0d5G-r7UIQjQHaFW?w=258&h=187&c=7&r=0&o=7&dpr=1.3&pid=1.7&rm=3" },
      { id: crypto.randomUUID(), name: "Tea", price: 15, category: "Beverage", image: "https://images.pexels.com/photos/12912495/pexels-photo-12912495.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" },
      { id: crypto.randomUUID(), name: "Pongal", price: 30, category: "Breakfast", image: "https://www.spiceindiaonline.com/wp-content/uploads/2014/01/Ven-Pongal-3.jpg" }
    ];

    const persist = (key, data) => localStorage.setItem(key, JSON.stringify(data));
    const read = (key, fallback) => {
      try { return JSON.parse(localStorage.getItem(key)) || fallback; }
      catch { return fallback; }
    };

    const menuItems = read("menuItems", defaultMenu);

    const formatCurrency = (n) => "₹" + (n || 0).toFixed(2);
    const updateDate = () => {
      const now = new Date();
      todayBadge.textContent = now.toLocaleDateString("en-IN", { weekday: "short", day: "numeric", month: "short", year: "numeric" });
    };

    const renderMenu = () => {
      menuGrid.innerHTML = "";
      menuItems.forEach(item => {
        const card = document.createElement("div");
        card.className = "menu-card";
        card.innerHTML = `
          <img src="${item.image || "https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=600&q=60"}" alt="${item.name}" />
          <div class="title">
            <span>${item.name}</span>
            <span class="price">${formatCurrency(item.price)}</span>
          </div>
          <div class="tag">${item.category || "Item"}</div>
        `;
        card.onclick = () => addToCart(item.id);
        menuGrid.appendChild(card);
      });
    };

    const renderAdmin = () => {
      menuTableBody.innerHTML = "";
      menuItems.forEach(item => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.category}</td>
          <td>${formatCurrency(item.price)}</td>
          <td>
            <button class="ghost" data-id="${item.id}" data-action="edit">Edit</button>
            <button class="ghost" data-id="${item.id}" data-action="delete" style="color: var(--red);">Delete</button>
          </td>
        `;
        menuTableBody.appendChild(row);
      });
    };

    const renderCart = () => {
      cartItemsEl.innerHTML = "";
      if (!cart.length) {
        cartItemsEl.innerHTML = `<div class="tag">Cart is empty. Click menu to add.</div>`;
      }
      cart.forEach(item => {
        const row = document.createElement("div");
        row.className = "cart-row";
        row.innerHTML = `
          <div>
            <div style="font-weight:700;">${item.name}</div>
            <div class="tag">${formatCurrency(item.price)} each</div>
          </div>
          <div class="flex-between" style="gap:6px;">
            <button aria-label="decrease" onclick="updateQty('${item.id}', -1)">−</button>
            <div style="font-weight:700;">${item.qty}</div>
            <button aria-label="increase" onclick="updateQty('${item.id}', 1)">+</button>
          </div>
          <div style="text-align:right; font-weight:700;">${formatCurrency(item.price * item.qty)}</div>
          <button aria-label="remove" onclick="removeFromCart('${item.id}')" style="color: var(--red);">✕</button>
        `;
        cartItemsEl.appendChild(row);
      });
      const total = cart.reduce((s, i) => s + i.price * i.qty, 0);
      totalsEl.innerHTML = `
        <div class="totals-row"><span>Total</span><strong>${formatCurrency(total)}</strong></div>
      `;
      qrAmount.textContent = formatCurrency(total);
    };

    const renderSales = () => {
      const orders = read("orders", []);
      const monthly = {};
      orders.forEach(o => {
        const d = new Date(o.date);
        const key = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2, "0")}`;
        if (!monthly[key]) monthly[key] = { revenue: 0, count: 0 };
        monthly[key].revenue += o.total;
        monthly[key].count += 1;
      });
      const rows = Object.entries(monthly)
        .sort(([a], [b]) => b.localeCompare(a))
        .slice(0, 12);
      salesTableBody.innerHTML = "";
      rows.forEach(([month, data]) => {
        const tr = document.createElement("tr");
        const label = new Date(`${month}-01T00:00:00`).toLocaleDateString("en-IN", { month: "short", year: "numeric" });
        tr.innerHTML = `
          <td>${label}</td>
          <td>${data.count}</td>
          <td>${formatCurrency(data.revenue)}</td>
        `;
        salesTableBody.appendChild(tr);
      });
      if (!rows.length) {
        salesTableBody.innerHTML = `<tr><td colspan="3" class="tag">No sales yet. Complete a payment to populate.</td></tr>`;
      }
    };

    const startPrintMode = (mode) => {
      bodyEl.classList.add(mode);
      const cleanup = () => {
        bodyEl.classList.remove(mode);
        window.removeEventListener("afterprint", cleanup);
      };
      window.addEventListener("afterprint", cleanup);
      // Give the browser a moment to apply the class before printing
      setTimeout(() => window.print(), 20);
    };

    window.updateQty = (id, delta) => {
      cart = cart.map(item => item.id === id ? { ...item, qty: Math.max(1, item.qty + delta) } : item);
      cart = cart.filter(i => i.qty > 0);
      renderCart();
    };

    window.removeFromCart = (id) => {
      cart = cart.filter(item => item.id !== id);
      renderCart();
    };

    const addToCart = (id) => {
      const item = menuItems.find(m => m.id === id);
      if (!item) return;
      const existing = cart.find(c => c.id === id);
      if (existing) {
        existing.qty += 1;
      } else {
        cart.push({ ...item, qty: 1 });
      }
      renderCart();
    };

    const resetForm = () => {
      editingId = null;
      menuForm.reset();
      document.getElementById("submitBtn").textContent = "Save item";
      document.getElementById("cancelEdit").style.display = "none";
    };

    menuForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const formData = new FormData(menuForm);
      const payload = {
        name: formData.get("name").trim(),
        price: Number(formData.get("price")),
        category: formData.get("category") || "Item",
        image: formData.get("image").trim()
      };
      if (!payload.name || !payload.price) return;
      if (editingId) {
        const idx = menuItems.findIndex(m => m.id === editingId);
        if (idx >= 0) menuItems[idx] = { ...menuItems[idx], ...payload };
      } else {
        menuItems.unshift({ ...payload, id: crypto.randomUUID() });
      }
      persist("menuItems", menuItems);
      renderMenu();
      renderAdmin();
      resetForm();
    });

    document.getElementById("cancelEdit").onclick = resetForm;

    menuTableBody.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;
      const id = btn.dataset.id;
      const action = btn.dataset.action;
      if (action === "edit") {
        const item = menuItems.find(m => m.id === id);
        if (!item) return;
        editingId = id;
        menuForm.name.value = item.name;
        menuForm.price.value = item.price;
        menuForm.category.value = item.category;
        menuForm.image.value = item.image || "";
        document.getElementById("submitBtn").textContent = "Update item";
        document.getElementById("cancelEdit").style.display = "inline-flex";
      } else if (action === "delete") {
        const idx = menuItems.findIndex(m => m.id === id);
        if (idx >= 0) menuItems.splice(idx, 1);
        persist("menuItems", menuItems);
        renderMenu();
        renderAdmin();
      }
    });

    document.getElementById("clearCart").onclick = () => {
      cart = [];
      renderCart();
    };

    document.getElementById("payNow").onclick = () => {
      if (!cart.length) {
        alert("Cart is empty.");
        return;
      }
      qrModal.style.display = "flex";
    };

    document.getElementById("closeQR").onclick = () => {
      qrModal.style.display = "none";
    };

    document.getElementById("completePayment").onclick = () => {
      if (!cart.length) return;
      const total = cart.reduce((s, i) => s + i.price * i.qty, 0);
      const orders = read("orders", []);
      orders.push({
        id: crypto.randomUUID(),
        items: cart,
        total,
        date: new Date().toISOString()
      });
      persist("orders", orders);
      qrModal.style.display = "none";
      cart = [];
      renderCart();
      renderSales();
      alert("Payment marked as complete. Order saved.");
    };

    document.getElementById("printBill").onclick = () => {
      if (!cart.length) {
        alert("No items to print.");
        return;
      }
      window.print();
    };

    document.getElementById("printReport").onclick = () => {
      const orders = read("orders", []);
      if (!orders.length) {
        alert("No sales data to print yet.");
        return;
      }
      renderSales();
      startPrintMode("print-report");
    };

    window.addEventListener("click", (e) => {
      if (e.target === qrModal) qrModal.style.display = "none";
    });

    // Initial render
    updateDate();
    renderMenu();
    renderAdmin();
    renderCart();
    renderSales();


/* ===============================
   NAVIGATION VISIBILITY CONTROL
   (STRICT SHOW / HIDE ONLY)
================================ */

const navToggle = document.getElementById("navToggle");
const navLinks = document.getElementById("navLinks");

const menuSection  = document.querySelector(".menu");
const cartSection  = document.querySelector(".cart");
const adminSection = document.querySelector(".admin");
const salesSection = document.querySelector(".sales");

/* INITIAL STATE → HOME */
menuSection.style.display = "block";
cartSection.style.display = "block";
adminSection.style.display = "none";
salesSection.style.display = "none";

/* Mobile toggle */
navToggle.onclick = () => {
  navLinks.classList.toggle("open");
};

/* Navigation clicks */
navLinks.addEventListener("click", (e) => {
  const btn = e.target.closest("button");
  if (!btn) return;

  const view = btn.dataset.view;

  /* Hide ALL first */
  menuSection.style.display = "none";
  cartSection.style.display = "none";
  adminSection.style.display = "none";
  salesSection.style.display = "none";

  /* Apply rules */
  if (view === "home") {
    menuSection.style.display = "block";
    cartSection.style.display = "block";
  }

  if (view === "admin") {
    adminSection.style.display = "block";
  }

  if (view === "sales") {
    salesSection.style.display = "block";
  }

  /* Close mobile menu */
  navLinks.classList.remove("open");
});
/* ===============================
   NAVBAR UX ENHANCEMENTS
================================ */

const navButtons = navLinks.querySelectorAll("button");

/* Set active menu */
function setActive(button) {
  navButtons.forEach(btn => btn.classList.remove("active"));
  button.classList.add("active");
}

/* Set Home active by default */
setActive(navButtons[0]);

/* Update active on click */
navLinks.addEventListener("click", (e) => {
  const btn = e.target.closest("button");
  if (!btn) return;
  setActive(btn);
});

/* Close mobile menu when clicking outside */
document.addEventListener("click", (e) => {
  if (
    !navLinks.contains(e.target) &&
    !navToggle.contains(e.target)
  ) {
    navLinks.classList.remove("open");
  }
});


  </script>
</body>
</html>

